Version 4
SHEET 1 2264 1536
WIRE -928 0 -1136 0
WIRE -496 0 -928 0
WIRE -224 0 -496 0
WIRE 160 0 -224 0
WIRE 272 0 160 0
WIRE 864 0 368 0
WIRE -224 80 -224 0
WIRE 320 96 320 64
WIRE 528 96 320 96
WIRE 864 96 864 0
WIRE 864 96 608 96
WIRE 160 128 160 0
WIRE 176 128 160 128
WIRE 320 128 320 96
WIRE 320 128 272 128
WIRE -496 192 -496 0
WIRE -448 192 -496 192
WIRE -368 192 -384 192
WIRE -224 224 -224 160
WIRE -160 224 -224 224
WIRE -32 224 -64 224
WIRE 224 224 224 192
WIRE 224 224 -32 224
WIRE -1136 240 -1136 0
WIRE -368 240 -368 192
WIRE -368 336 -368 304
WIRE -272 336 -368 336
WIRE -112 336 -112 288
WIRE -112 336 -272 336
WIRE 112 336 64 336
WIRE 256 336 192 336
WIRE 352 336 256 336
WIRE 864 336 864 96
WIRE 864 336 432 336
WIRE 864 384 864 336
WIRE -272 400 -272 336
WIRE 64 400 64 336
WIRE -1136 416 -1136 320
WIRE 256 416 256 336
WIRE 208 480 176 480
WIRE 464 480 304 480
WIRE -32 512 -32 224
WIRE 176 512 176 480
WIRE 176 512 -32 512
WIRE 464 512 464 480
WIRE 864 512 864 464
WIRE 864 512 464 512
WIRE 1056 512 864 512
WIRE 1152 512 1056 512
WIRE -272 528 -272 480
WIRE 1056 576 1056 512
WIRE 864 608 864 512
WIRE -496 640 -496 192
WIRE -32 640 -32 512
WIRE -928 688 -928 0
WIRE -848 688 -928 688
WIRE -656 688 -768 688
WIRE -560 688 -656 688
WIRE 480 688 32 688
WIRE 480 720 480 688
WIRE 864 720 864 688
WIRE 864 720 480 720
WIRE 1056 736 1056 656
WIRE 864 752 864 720
WIRE -656 768 -656 688
WIRE -496 768 -496 736
WIRE -272 768 -496 768
WIRE -32 768 -32 736
WIRE -32 768 -272 768
WIRE 864 880 864 832
WIRE -656 944 -656 832
WIRE -272 1104 -272 768
WIRE -272 1328 -272 1184
FLAG 1056 736 0
FLAG 864 880 0
FLAG 64 400 0
FLAG -1136 416 0
FLAG 1152 512 Vout
FLAG -656 944 0
FLAG -272 528 0
FLAG -272 1328 0
FLAG -656 688 Vref
SYMBOL npn 176 192 R270
SYMATTR InstName T2
SYMATTR Value CustomT2
SYMBOL npn 272 64 R270
SYMATTR InstName T1
SYMATTR Value CustomT1
SYMBOL npn 208 416 M90
SYMATTR InstName CustomT3
SYMATTR Value 2N2222
SYMBOL npn 32 640 M0
SYMATTR InstName T4
SYMATTR Value CustomT3
SYMBOL res 624 80 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R5
SYMATTR Value 100
SYMBOL res -240 64 R0
SYMATTR InstName R1
SYMATTR Value 270
SYMBOL res 448 320 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R4
SYMATTR Value 100
SYMBOL res 208 320 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R3
SYMATTR Value 10k
SYMBOL res 848 368 R0
SYMATTR InstName R6
SYMATTR Value 0.5
SYMBOL res 848 592 R0
SYMATTR InstName R8
SYMATTR Value 60k
SYMBOL res 1040 560 R0
SYMATTR InstName RL
SYMATTR Value 1k
SYMBOL res 848 736 R0
SYMATTR InstName R7
SYMATTR Value 100k
SYMBOL zener -640 832 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D1
SYMATTR Value 1N750
SYMBOL res -752 672 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R2
SYMATTR Value 2k8
SYMBOL voltage -1136 224 R0
SYMATTR InstName V1
SYMATTR Value 40
SYMBOL voltage -1568 48 R0
SYMATTR InstName V2
SYMATTR Value PULSE(0 0.3 0 0.001 0.02 1n 0.021)
SYMBOL npn -560 640 R0
SYMATTR InstName T3
SYMATTR Value CustomT3
SYMBOL res -256 1200 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R9
SYMATTR Value 2k
SYMBOL pnp -64 288 M270
SYMATTR InstName TF
SYMATTR Value CustomTF
SYMBOL res -288 384 R0
SYMATTR InstName R10
SYMATTR Value 5k
SYMBOL diode -384 240 R0
SYMATTR InstName D2
SYMATTR Value 1N4148
SYMBOL diode -448 208 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D3
SYMATTR Value 1N4148
TEXT 96 928 Left 2 !.model CustomT1 AKO: 2N2222 BF=20
TEXT 96 976 Left 2 !.model CustomT2 AKO: 2N2222 BF=50
TEXT 96 1032 Left 2 !.model CustomT3 AKO: 2N2222 BF=200
TEXT 104 872 Left 2 !;tran 0 5 0 0.01
TEXT 96 1080 Left 2 !.model CustomTF AKO: 2N2907 BF=100
TEXT 112 824 Left 2 !.op
